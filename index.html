<!-- Daisy Sanchez
     COMP 20 Web Programming
     Homework 10: API Fun!
     7 April 2020 -->
<!-- URL:  https://dys98.github.io/hw10/ -->
<!DOCTYPE html>
<html>
    <head>
        <title>Assignment 10: API Fun!</title>

        <meta charset="utf-8"/>

        <script>
            function getData()
            {
                if (this.readyState == 4 && this.status == 200){
                    var data = this.responseText;
                    var imgInfo = JSON.parse(data);
                    for(i = 0; i < 3; i++){
                        document.write("Image URL " + i + ": " + imgInfo[i] + "<br>");
                    }
                }
            }
            
            function getDogs() {
            
                var req = new XMLHttpRequest();

                if (!req){
                    alert("Unable to create HTTPRequestObject");
                    return;
                }

                req.open("GET", "http://shibe.online/api/shibes?count=3&urls=true&httpsUrls=true", true);
                
                this.onreadystatechange = getData(); 
                
                req.send();
            }

        </script>
    </head>

    <body>

        <h1>API Fun!</h1>
        <br>

        <h3>API Selected and What It Does: </h3>
        <p>The AI I found at Shibe.Online returns random images of dogs.</p>
        <br>

        <h3>Website Found: </h3>
        <p>https://shibe.online was a link found on the https://github.com/public-apis/public-apis webage, which offered several free, ublic API's to use.</p>
        <br>

        <h3>Options Used for API Request: </h3>
        <p>May look at code provided at bottom.</p>
        <br>

        <h3>Applications of API: </h3>
        <p> - Could be used for a digital doggy calendar/planner which provides a different picture of a dog each day.</p>
        <p> - Could be used on a timer website/app where a person could log on to use the timer for doing work (think pomodoro timer) and the person could look at pictures of dogs while taking breaks. </p>
        <br>
        <br>

        <p>When it came to doing this assignment, I encountered several issues. I was able to figure many out but ultimately became stuck on this problem and I couldn't figure it out. I tried looking up the error message online but I ended up getting more confused and was unable to finish the assignment. In order to be sure that I at least submitted something, I decided to provide the error message and my code. </p>

        <p>My intention for the code originally was to access just three random dog images from the API when the button was pressed and display them. (Button can be seen at bottom of page.)</p>

        <h3>Error Code Recieved (I couldn't figure it out):</h3>
        <p>Access to XMLHttpRequest at 'http://shibe.online/api/shibes?count=3&urls=true&httpsUrls=true' from origin 'null' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</p>

        <p>index.html:38 GET http://shibe.online/api/shibes?count=3&urls=true&httpsUrls=true net::ERR_FAILED<br/>getDogs @ index.html:38<br/>onclick @ index.html:50</p>

        <h3>Code Written for Assignment:</h3>
        <p>
            &lt !DOCTYPE html> <br/>
            &lt html> <br/>
                &lt head> <br/>
                    &lt title>Assignment 10: API Fun!&lt/title> <br/>

                    &lt meta charset="utf-8"/> <br/>

                    &lt script> <br/>
                        function getData() <br/>
                        { <br/>
                            if (this.readyState == 4 && this.status == 200){ <br/>
                                var data = this.responseText;<br/>
                                var imgInfo = JSON.parse(data);<br/>
                                for(i = 0; i < 3; i++){<br/>
                                    document.write("Image URL " + i + ": " + imgInfo[i] + "&ltbr>"); <br/>
                                }<br/>
                            }<br/>
                        }<br/>
            
                        function getDogs() <br/>
                        { <br/>
            
                            var req = new XMLHttpRequest();<br/>

                            if (!req){ <br/>
                                alert("Unable to create HTTPRequestObject"); <br/>
                                return;<br/>
                            }<br/>

                            req.open("GET", "http://shibe.online/api/shibes?count=3&urls=true&httpsUrls=true", true);<br/>

                            this.onreadystatechange = getData(); <br/>
                
                            req.send();<br/>
                        }<br/>

                    &lt/script> <br/>
                &lt/head> <br/>

                &ltbody> <br/>

                    &lth1>API Fun!&lt/h1> <br/>

                    &ltbr> <br/>

                    &ltinput type = "button" value = "Get Dogs" onclick="getDogs()"> <br/>
        
                &lt/body><br/>

            &lt/html><br/>
        </p>

        <input type = "button" value = "Get Dogs" onclick="getDogs()">
        
    </body>

</html>